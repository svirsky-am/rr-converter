# RN

1) Столкнулся с большими трубностями при сопоставлении проверочных файлов между собой. Например: 
    - время транзакция для camt053 и mt940 указывается с часами и секундами, а в выписке сбербанка толлько дата. При конвертации из extrafin csv приходится вставлять 00:00.
  
    - у транзаций camt053 зафиксировано время бронирования и время подтверждения транзакции
    - сложновато было понять как сериализовать данные из xml  c помощью quick_xml+serde, поэтому была применена чуть более простая библиотека `roxml`. Но у `roxml` походе 
    - идендитификаторы виписок то int, то str (как в случае со сбербанком)
    - два примера camt053 и все три примера mt940 не похожи по структуре между собой. В примерах mt940 похоже имеется множетво выписок по нескольким кошелькам, что не сопостовляется со структорой выписки от сбербанка.
    - Не получлиось восопльзоваться предложенным парвером mt940 т.к. он не смог без ошибок спарсить ни один из примеров
    - "csv" формат от сбербанка является не классическим примером csv. перед парсингом пришлось его нормализовать .

Возможно сущности должны были выглядеть так:
Выписка -> перечень аккаутнов -> перечень кошельков/счетов -> транзакции /балансы   


`0940` в MT940_github_1.mt940 и 
`O940` в MT_940_oracle.mt940



# Персеры пока в процессе написания. 
Пока определена структура для проекта.

Сборка библиотеки:
```sh
cargo build -p rr-parser-lib --verbose
```
Сборка cli-утилиты :
```sh
cargo build -p rr-file-processor --verbose
```
Запуск тестов для библиоетеки
```sh
cargo test -p rr-parser-lib --verbose
```
Запуск тестов для cli-утилиты
```sh
cargo test -p rr-file-processor --verbose
```
# Запуск утилиты (пока поломан) 
```sh
target/debug/rr-file-processor \
                --in-format csv --out-format xml \
                --input  - \
                --output output/formatted/stdin_csv_to_xml
```
# refs
https://github.com/r3bb1t/coverage_formats/blob/main/Readme.md

cargo run -p sandbox_env